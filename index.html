<!DOCTYPE html>
<html>

<head>
	<meta charset=utf-8 />
	<title>Language and Autism</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<script src='https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.js'></script>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

	<script src='https://code.jquery.com/jquery-1.12.0.min.js'></script>
	<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
	<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
	<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' />

	<link href='https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.css' rel='stylesheet' />
	<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>


	<style>
		body {
			margin: 0;
			padding: 0;
			font-family: "Montserrat"
		}
		
		#map {
			position: absolute;
			top: 0;
			bottom: 0;
			width: 100%;
			width: 100%;
			right: 0px
		}
		
		h1 {
			padding: 8px 25px 8px 15px;
			margin: 0;
			background: #1C9976;
			color: whitesmoke;
			font-weight: 400;
			font-size: 1.5em;
			text-align: left;
		}
		
		h2 {
			margin: 0;
			padding: 8px 25px 8px 15px;
			color: #1C9976;
			font-weight: 500;
			font-size: 1.2em;
			text-align: left;
		}
	</style>
</head>

<body>
	<div id='map'></div>

	<script>
		var map = L.map('map', {
			center: [28.71, -81.32],
			zoom: 12
		})
		var tiles = L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.{ext}', {
			attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
			subdomains: 'abcd',
			minZoom: 0,
			maxZoom: 20,
			ext: 'png'
		});
		tiles.addTo(map);
		map.addLayer(tiles);


		// use JQuery to load GeoJSON from an external file
		$.getJSON("B_winter_park_clean.geojson", function (data) {
			// add GeoJSON layer to the map once the file is loaded
			//			console.log(data);


			dataLayer = L.geoJson(data, {
				pointToLayer: function (feature, latlng) {
					var circle = L.circle(latlng, 2, {
						color: 'blue',
						fillColor: "blue",
					});
					return circle;
				}
			});
			var clusters = L.markerClusterGroup({
				spiderfyOnMaxZoom: false,
				showCoverageOnHover: true,
				zoomToBoundsOnClick: false
			});
			clusters.on('clusterclick', function (a) {
				var html = 'hello';
				var markers = a.layer.getAllChildMarkers();
				for (var i = 0; i < markers.length; i++) {
					var totals = markers[i].feature.properties['Word_Y_N'] + '<br>';
					html += totals;
					console.log(markers[i].feature.properties);
				}
				map.openPopup(html, a.layer.getLatLng());
			});
			clusters.addLayer(dataLayer);
			map.addLayer(clusters);
			//colorCircles();
		});


		//		function colorCircles() {
		//			//loop through each "layer" (circle) to access attribute info
		//				dataLayer.eachLayer(function (layer) {
		//					layer.setStyle({
		//						fillColor:getColor
		//					})
		//
		//					if (layer.feature.properties);
		//
		//				});
		//
		//			} // end colorCircles()
		//		
		//		function getColor(){
		//			
		//		}
	</script>


</body>


</html>